\SetTitle{11}{Key distribution}{Quantum advantages here}{11}

\section*{Overview}

\begin{frame}{Overview}{What will we study here?}

\begin{itemize}[<+->]
    \item \href{https://en.wikipedia.org/wiki/Alice_and_Bob}{Alice and Bob} wish to create a shared key that nobody else knows.
    \item We review a classical approach, \href{https://en.wikipedia.org/wiki/Diffie-Hellman_key_exchange}{Diffie--Hellman}.
    \item We examine two quantum protocols
    \begin{description}
       \item[\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#BB84_protocol:_Charles_H._Bennett_and_Gilles_Brassard_(1984)}{BB84}] Alice physically sends states, such as photons, to Bob.  This works well if Alice and Bob are always separated.
       \item[\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#E91_protocol:_Artur_Ekert_(1991)}{E91}] Alice and Bob begin with $k$ EPR pairs, but they can then separate and agree on a shared key.
    \end{description}
    \item Both protocols allow detection of \href{https://en.wikipedia.org/wiki/Eavesdropping}{Eve, the eavesdropper}.
    \item Quantum devices for key distribution \href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#Implementations}{have been built}.
\end{itemize}
    
\end{frame}

\section*{Classical exchange}

\begin{frame}{\href{https://en.wikipedia.org/wiki/Diffie-Hellman_key_exchange}{Diffie--Hellman} key exchange}{Secrecy relies on the apparent difficulty of \href{https://en.wikipedia.org/wiki/Discrete_logarithm}{discrete log problem}.}

\Vskip{-3em}\begin{ProtocolDialog}{0.28\textwidth}{0.33\textwidth}{0.37\textwidth}
\visible<1->{\All{$g=5$ and $p=23$.}{My secret $a=7$.}{My secret $b=12$.}}
\visible<2->{\All{Compute $5^{x}\bmod 23$}{I compute $A=5^{a}\bmod 23$.}{I compute $B=5^{b}\bmod 23$.}}
\visible<3->{\All{}{I publish $A=17$.}{I publish $B=18$.}}
\visible<4->{\All{Everybody hears:}{$B=18$}{$A=17$.}}
\visible<5->{\All{}{I compute $B^{a}\bmod 23$.}{I compute $A^{b}\bmod 23$.}}
\visible<6->{\All{}{I obtain $6=18^{7}\bmod 23$.}{I obtain $6=17^{12}\bmod 23$.}}
\visible<7->{\All{They agree!}{We have a shared key $6$.}{We have a shared key $6$.}}
\end{ProtocolDialog}
\OnlyRemark{8}{%
It's easy to compute $A$ from $a$ and $B$ from $b$.  There is no known \emph{efficient} classical algorithm for computing $a$ given $A$ and $B$.  Alice and Bob share the key and nobody else can compute it efficiently unless they know $a$ or $b$---unless they have a sufficiently large quantum computer.
}
    
\end{frame}

\begin{frame}{Remarks on \href{https://en.wikipedia.org/wiki/Diffie-Hellman_key_exchange}{Diffie--Hellman}}
\begin{itemize}[<+->]
    \item The inventors were recognized in 2015 with the \href{https://awards.acm.org/about/2015-turing}{Turing award}.
    \item The shared secret is used sufficiently briefly that attempts to guess it will not pay off.
    \item The secrets $a$ and $b$ can be randomly generated.
    \item Eve, the eavesdropper, can determine $a$ and $b$ quickly if she can efficiently solve the \href{https://en.wikipedia.org/wiki/Discrete_logarithm}{discrete log} problem.
    \item A quantum computer can do that!
    \item Most companies are therefore interested in \href{https://en.wikipedia.org/wiki/Post-quantum_cryptography}{post-quantum cryptography}.
    \item Quantum key-distribution machines \href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#Implementations}{have been built}.
\end{itemize}
\end{frame}

\section*{BB84}

\begin{frame}{\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#BB84_protocol:_Charles_H._Bennett_and_Gilles_Brassard_(1984)}{BB84 protocol} (Bennett and Brassard)}{Overview}
\TwoUnequalColumns{0.4\textwidth}{0.6\textwidth}{%
\begin{center}
    \begin{TIKZP}[scale=0.9]
    \draw (0,0) rectangle ++(1,1) node[pos=0.5] {Alice};
    \draw (4,0) rectangle ++(1,1) node[pos=0.5] {Bob};
    \visible<2->{\draw[->] (1,0.5) -- (4,0.5) node[midway,above] {sends stream};}
    \draw<3->[->] (0.5,0) -- (2.4,-1.5);
    \draw<3->[->] (4.5,0) -- (2.6,-1.5);
    \draw<3-> (2.5,-1.5) node[below] {publish};
    \end{TIKZP}
\end{center}}{%
\begin{itemize}
    \item<1-> Alice and Bob are separated and begin with no shared information.
    \item<2-> Alice sends a stream of quantum states to Bob.
    \only<2>{%
    \begin{itemize}
        \item These are sent physically, not teleported
        \item For example, over a fiber-optic channel
        \item Or better yet, a stream of photons sent in space
    \end{itemize}}
    \item<3-> Alice and Bob publish some information
    \only<3>{%
    \begin{itemize}
        \item This allows them to determine a shared key.
        \item They can also probabilistically rule out an eavesdropper.
    \end{itemize}
    }
    \item<4-> Alice and Bob now share a key that nobody else (probably) knows.
\end{itemize}
}

\end{frame}

\begin{frame}{\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#BB84_protocol:_Charles_H._Bennett_and_Gilles_Brassard_(1984)}{BB84 protocol}}{Notation}
\Vskip{-3em}\TwoUnequalColumns{0.7\textwidth}{0.3\textwidth}{%
\begin{BBKey}%
To match \href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#BB84_protocol:_Charles_H._Bennett_and_Gilles_Brassard_(1984)}{other presentations of this material}, we exchange the geographical locations of \ket{0} and \ket{1} and use the following notation:
    \begin{description}
     \item<1->[\STD{}] denotes the standard basis, depicted to the right.  Measurements in this basis are
     \ket{0} and \ket{1}, with symbols \BBUp{} and \BBRt{},
     respectively.  These measurements will be interpreted as bits $0$ and $1$, respectively
     \item<2->[\HDM{}] denotes the \emph{Hadamard} basis.  Measurements in this basis are \ket{+} and \ket{-},
     with symbols \BBNe{} and \BBSe{}, respectively.  These measurements will be interpreted as bits $0$ and $1$, respectively.
    \end{description}
\end{BBKey}}{%
\begin{center}
\begin{TIKZP}
\draw<1->[->,thick] (0,0) -- (1,0) node[right] {\ \ket{1}};
\draw<1->[->,thick] (0,0) -- (0,1) node[above] {\ket{0}};
\draw<2->[->,thick] (0,0) -- (45:1) node[above] {\ket{+}};
\draw<2->[->,thick] (0,0) -- (-45:1) node[below] {\ket{-}};
\end{TIKZP}
\MedSkip{}
\visible<3->{%
\begin{BBKey}
\BBBasis{}
\end{BBKey}}
\end{center}
}
\end{frame}

\begin{frame}{Possibilities for Alice and Bob}{Using two bases}

\TwoUnequalColumns{0.7\textwidth}{0.3\textwidth}{%
\Vskip{-3em}\begin{BBKey}
\begin{center}
    \begin{tabular}{cc|cc|c}
    \multicolumn{2}{c|}{Alice} & \multicolumn{2}{|c|}{Bob} & Agreed \\
    basis & sends & basis & observes & bit \\ \hline
    \visible<1->{\STD{} & \BBUp{} & \STD{} & \BBUp{} & $0$ \\}
    \visible<2->{\STD{} & \BBUp{} & \HDM{} & \BBNe{} or \BBSe{} & \DisAgree{} \\}
    \visible<3->{\STD{} & \BBRt{} & \STD{} & \BBRt{} & $1$ \\}
    \visible<4->{\STD{} & \BBRt{} & \HDM{} & \BBNe{} or \BBSe{} & \DisAgree{} \\}
    \visible<5->{\HDM{} & \BBNe{} & \STD{} &  \BBUp{} or \BBRt{} & \DisAgree{} \\}
    \visible<6->{\HDM{} & \BBNe{} & \HDM{} & \BBNe{} & $0$ \\}
    \visible<7->{\HDM{} & \BBSe{} & \STD{} & \BBUp{} or \BBRt{} & \DisAgree{} \\}
    \visible<8->{\HDM{} & \BBSe{} & \HDM{} & \BBSe{} & $1$ \\}
    \end{tabular}
\end{center}
\end{BBKey}
}{%
\begin{BBKey}
\begin{center}
\BBBasis{}
\end{center}
\end{BBKey}
}

\end{frame}

\begin{frame}{\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#BB84_protocol:_Charles_H._Bennett_and_Gilles_Brassard_(1984)}{BB84 protocol}}{How does it work?}
\Vskip{-4em}\TwoUnequalColumns{0.7\textwidth}{0.3\textwidth}{%
\begin{BBKey}
\only<1-6>{%
\begin{itemize}
    \item<1-> Alice randomly picks a basis \STD{} or \HDM{}.
    \item<2-> Alice randomly generates $0$ or $1$ in that basis, using the table shown to the right.
    \item<3-> Bob receives the state and then randomly decides to measure the state in \STD{} or \HDM{}.  His basis agrees with Alice's half the time.
    \only<3>{%
    \begin{itemize}
        \item Half the time, he will agree with Alice's basis, and his measurement, $0$ or $1$, will yield the state Alice sent.
        \item Half the time, he will disagree with Alice's basis, and then his measurement is equally likely to be $0$ or $1$.
    \end{itemize}}
\end{itemize}}
\only<7->{%
\begin{itemize}
    \item When they are ready, they publish their sequence of bases.
    \item They now know where they have agreement, and the measurements made in those instances constitute a shared key.
    \item Their shared key so far is $0101$.
\end{itemize}
}
\end{BBKey}
}{%
\begin{BBKey}
\begin{center}
    \BBBasis{}
\end{center}
\end{BBKey}
}
\only<4->{%
\begin{BBKey}
\begin{center}
    \begin{tabular}{c|cccccccc}
      \href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#BB84_protocol:_Charles_H._Bennett_and_Gilles_Brassard_(1984)}{Example} & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 \\ \hline
    Alice's basis   & \STD{} & \visible<5->{ \STD{}} & \visible<6->{\HDM{} & \STD{} & \HDM{} & \HDM{} & \HDM{} & \STD{}}  \\
    Alice sends  & \BBUp{} & \visible<5->{\BBRt{}} & \visible<6->{\BBSe{} & \BBUp{} & \BBSe{} & \BBNe{} & \BBNe{} & \BBRt{}  }\\
    Bob's basis  & \STD{} & \visible<5->{\HDM{}} & \visible<6->{\HDM{} & \HDM{} & \STD{} & \HDM{} & \STD{} & \STD{} }\\
    \visible<7->{Agree? & \Agree{} & & \Agree{} & & & \Agree{} & & \Agree{} }\\
    \visible<7->{Shared key & $0$ & & $1$ & & & $0$ & & $1$}
    \end{tabular}
\end{center}
\end{BBKey}}
\end{frame}

\begin{frame}{What about Eve?}{Suppose she tries to intercept the state.}

\Vskip{-3em}\TwoUnequalColumns{0.4\textwidth}{0.6\textwidth}{%
\begin{BBKey}
\begin{center}
    \begin{TIKZP}[scale=0.9]
    \draw (0,0) rectangle ++(1,1) node[pos=0.5] {Alice};
    \draw (4,0) rectangle ++(1,1) node[pos=0.5] {Bob};
    \visible<2->{\node[above] at (1.5,0.5) {\STD{}};}
    \visible<2->{\node[above] at (3.5,0.5) {\STD{}};}
    \draw[->] (1,0.5) -- (4,0.5) ;
    \node<3->[below] at (1.5,0.5) {\BBRt{}};
    \node<3,5>[below] at (3.5,0.5) {\BBRt{}};
    \draw<4->[fill=yellow] (2,0) rectangle ++(1,1) node[pos=0.5] {Eve};
    \node<5>[above] at (2.5,0.5) {\STD{}};
    \node<6->[above] at (2.5,0.5) {\HDM{}};
    \node<5>[below] at (2.5,0.5) {\BBRt{}};
    \node<7->[below] at (2.5,0.5) {\BBSe{}};
    \node<9>[below] at (2.75,0.5) {\BBSe{}};
    \node<10-11>[below] at (3.0,0.5) {\BBSe{}};
    \node<12> [below] at (3.5,0.5) {\BBRt{}};
    \node<13->[below] at (3.5,0.5) {\BBUp{}};
    \end{TIKZP}
\end{center}%
\visible<13>{%
\BigSkip{}
Alice and Bob can catch Eve if they are willing to publish some bits of their agreed-upon key.  Eve's interference should on average disturb half of those bits.
\MedSkip{}
How much should they publish?
}
\end{BBKey}
}{%
\begin{BBKey}
\only<1-3>{%
\begin{itemize}
    \item<1-> Alice is sending states to Bob.
    \item<2-> They randomly select the same basis.
    \item<3-> When Alice sends her state to Bob, he will measure it exactly as sent.
\end{itemize}
}%
\only<4-8>{%
\begin{itemize}
    \item<4-> If Eve intercepts and measures the state, the results depend on the basis Eve chooses.
    \begin{itemize}
        \item<5-> If Eve measures in the same basis as Alice and Bob, she measures identically to them, and she does not disturb the state.
        \item<6-> If Eve measures in the other basis, then she will
        \begin{itemize}
            \item<7-> randomly see \BBNe{} or \BBSe{}.
            \item<8-> change the state seen by Bob.
        \end{itemize}
    \end{itemize}
\end{itemize}
}
\only<9->{%
\begin{itemize}
    \item<9-> Bob is measuring in the \STD{} basis but, thanks to Eve, is now receiving state \BBSe{}.
    \item<11-> When he receives state \BBSe{} and measures in basis \STD{}, then 
    \begin{itemize}
        \item<12-> half the time he will measure \BBRt{}, and nobody will know Eve was there, but
        \item<13-> half the time he will measure \BBUp{}, which can show that Eve was there, if Alice and Bob publish some of their agreed-upon key.
    \end{itemize}
\end{itemize}
}
\end{BBKey}
}
\end{frame}

\begin{frame}{Analysis for detecting Eve}
\Vskip{-3em}\begin{itemize}[<+->]
    \item Suppose Alice and Bob publish $n$ measurements from states where they agreed on basis.  They essentially disclose $n$ bits from their agreed-upon key.
    \item For each one of those bits, the probability of Eve agreeing (or disagreeing) on basis while intercepting is $\frac{1}{2}$.
    \item The probability of Eve being that lucky (picking the same basis as Alice and Bob) for $n$ such measurements is thus $\left(\frac{1}{2}\right)^{n}$.
    \item The probability of catching Eve after $n$ disclosed bits is thus
    \[ 1 - \left(\frac{1}{2}\right)^{n} \]
    \begin{itemize}
    \item They can be 99\% certain of Eve's absence if they find no discrepancy after disclosing $7$ measurements. 
    \end{itemize}
    \item To make sure Eve is surprised, the disclosed measurements should be randomly drawn from the mutual key.  Alice and Bob can discard those disclosed bits.
\end{itemize}

\end{frame}

\section*{E91}

\begin{frame}{\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#E91_protocol:_Artur_Ekert_(1991)}{E91 protocol} (Ekert)}{Overview}

\Vskip{-3em}\begin{itemize}[<+->]
    \item Alice and Bob begin with $k$ EPR pairs, approximately $22\%$ of which will yield a bit of the shared key.
    \item The protocol relies on the following properties of an EPR pair \[\RootTwo{}\left(\ket{00}+\ket{11}\right)\] which hold in any basis:
    \begin{itemize}
        \item The first measured qubit is equally likely to yield either outcome.
        \item If the second qubit is measured in the same basis as the first, it yields the same outcome as the first qubit.
    \end{itemize}
    \item The protocol makes use of four bases.
    \item \href{https://en.wikipedia.org/wiki/Alice_and_Bob\#Cast_of_characters}{Eve, the eavesdropper} can be detected by statistical analysis of the measurements.
\end{itemize}

\end{frame}

\begin{frame}{The measurement bases}{Increments of $\pi/8$ away from \ket{0}}
\Vskip{-4em}\TwoUnequalColumns{0.6\textwidth}{0.4\textwidth}{%
\only<1-6>{%
\begin{EKey}
\begin{itemize}
    \item<1-> We begin with the computational basis
    \item<2-> The basis $Z_\theta$ is rotated $\theta$ degrees counterclockwise from \ket{0}.  Thus, $\ZZ{}=\ket{0}$.
    \only<3>{%
    \item To simplify diagrams, we do not show the corresponding rotation of \ket{1}.
        \item In the coordinate system as shown,
        $Z_\theta$ is located at $\cos(\theta)\ket{0} + \sin(\theta)\ket{1}$.
        \item The probability of measuring $Z_\theta$ as
        \ket{0} is thus $\Prob{\cos(\theta)}=\cos^{2}(\theta)$.}
    \item<4-> Here is the basis \ZZPO{8}\visible<5->{, \ZZPO{4}}\visible<6->{, and \ZZNPO{8}.}
\end{itemize}\end{EKey}}
\only<7->{%
\begin{EKey}
\begin{itemize}
    \item<7-> \textcolor<7>{\RCone}{Alice} will measure in one of three bases.
    \item<8-> \textcolor<8>{\RCtwo}{Bob} will measure in one of three bases.
    \item<9-> With Alice and Bob each drawing from three bases, there are $9$ combinations of basis pairs:
    \TensProd{\Set{\textcolor<10>{Purple}{\ZZ{}}, \textcolor<10>{Purple}{\ZZPO{8}}, \ZZPO{4}}}{\Set{\ZZNPO{8},\textcolor<10>{Purple}{\ZZ{}},\textcolor<10>{Purple}{\ZZPO{8}}}}.
    \item<10-> Among those, \textcolor<10>{Purple}{$2$ have the same basis} for both Alice and Bob: they will observe the same measurements.
    \item<11-> This protocol is thus $\frac{2}{9}\approx 22\%$ efficient in EPR pairs for forming a shared key.
\end{itemize}
\end{EKey}
}
}{%
\begin{EKey}
\begin{center}
\begin{TIKZP}[scale=2]
\textcolor<8>{\RCtwo}{%
\textcolor<7>{\RCone}{%
\textcolor<10>{Purple}{%
\draw<1->[->,ultra thick] (0,0) -- (1,0) node[right] {\ \ket{0}};}%
}%
}
\draw<1->[->,ultra thick] (0,0) -- (0,1) node[above] {\ket{1}};
\draw<2-3>[thick] (1.0,0) arc(0:30:1.0);
\draw<2-3>[->] (0,0) -- (30:1);
\visible<3>{\draw[->,dotted] (0,0) -- (120:1);}
\visible<3>{\node at (1,0.6) {$Z_\theta$};}
\node<2-3> at (0.7,0.2) {$\theta$};
\textcolor<7>{\RCone}{%
\draw<5->[->,thick] (0,0) -- (45:1) node[right] {\ZZPO{4}};
\textcolor<8>{\RCtwo}{%
\textcolor<10>{Purple}{%
\draw<4->[->,thick] (0,0) -- (22.5:1) node[right] {\ZZPO{8}};}%
}%
}
\textcolor<8>{\RCtwo}{%
\draw<6->[->,thick] (0,0) -- (-22.5:1) node[right] {\ZZNPO{8}};}
\end{TIKZP}
\end{center}
\end{EKey}

\visible<12->{%
We will see that the \emph{unused} measurements can implicate Eve.
}
}
    
\end{frame}

\begin{frame}{\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#E91_protocol:_Artur_Ekert_(1991)}{E91 protocol} (Ekert)}{The protocol}

\begin{EKey}
\begin{itemize}[<+->]
    \item Alice and Bob begin with $k$ EPR pairs, each in the state $\RootTwo{}\left(\ket{00}+\ket{11}\right)$, expecting to obtain a key of length $\sim .22 k$.
    \item For each EPR pair $(a,b)$, in any order;
    \begin{itemize}
        \item Alice measures $a$ randomly in a basis drawn from \Set{\ZZ{}, \ZZPO{8}, \ZZPO{4}}.
        \item Bob measures $b$ randomly in a basis drawn from \Set{\ZZNPO{8},\ZZ{},\ZZPO{8}}.
    \end{itemize}
    \item After all $k$ pairs are processed, Alice and Bob publish the sequence of bases in which their measurements were made.
    \item For each measurement made in the same basis, they know their measurements will agree, and those bits form a shared key, which they keep to themselves.
    \item They do publish other measurements to catch Eve if she is there.
\end{itemize}
\end{EKey}
\end{frame}

\begin{frame}{\href{https://en.wikipedia.org/wiki/Quantum_key_distribution\#E91_protocol:_Artur_Ekert_(1991)}{E91 protocol} (Ekert)}{Example}

\Vskip{-4em}\begin{EKey}
\begin{center}
    \begin{tabular}{c|ccccccccc}
    Example & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 \\ \hline
         Alice basis & \ZZ{} & \ZZ{} & \ZZ{} & \ZZPO{8} & \ZZPO{8} & \ZZPO{8} & \ZZPO{4} & \ZZPO{4} & \ZZPO{4} \\
         Alice measures & $0$ & $1$ & $0$ & $1$ & $0$ & $1$ & $0$ & $1$ & $0$ \\
         Bob basis & \ZZNPO{8} & \ZZ{} & \ZZPO{8} &   \ZZNPO{8} & \ZZ{} & \ZZPO{8} & \ZZNPO{8} & \ZZ{} & \ZZPO{8} \\
         Bob measures &  $0$ & $1$ & $0$ & & $0$ & $1$ & $1$ & &  $0$ \\
         $\theta$ &  $\pi/8$ & $0$ & $\pi/8$ & $\pi/4$ & $\pi/8$ & $0$ &$3\pi/8$ & $\pi/4$ & $\pi/8$ \\
         Useful? & \MetaAgree{} & \Agree{} & \MetaAgree{} & & \MetaAgree{} & \Agree{} & \DisAgree{} & &  \MetaAgree{} \\
         Shared key &  & $1$ & & & & $1$ & & &
    \end{tabular}
\end{center}
\begin{itemize}
    \item lah
    \item blah
\end{itemize}
\end{EKey}

\end{frame}