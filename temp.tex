\SetTitle{99}{temp}{faster}{99}



{
%%
%% #1 i first row
%% #2 j second row
%% #3 ii
%% #4 ij
%% #5 ji
%% #6 jj
%%
\def\GenTLArray#1#2#3#4#5#6{%
   \begin{center}\begin{TLArray}{4}{#1}{#2}{#3}{#4}{#5}{#6}{1}{0}
      \ensuremath{\begin{pmatrix*}
         \GenFourByFour{}
      \end{pmatrix*}}
\end{TLArray}\end{center}}%
%%
\def\GenSpotArrayAB#1#2#3#4{%
  \GenSpotArrayHelper{#1}{#2}{#3}{#4}{\ColorTwo}}
\def\GenSpotArrayZeroed#1#2#3{%
  \GenSpotArrayHelper{#1}{#2}{0}{#3}{\ColorFour}}
\def\GenSpotArrayHelper#1#2#3#4#5{%
{%
\begin{center}
\ensuremath{%
\def\arraystretch{1.4}%
\begin{SpotArray}{4}{#1}{#2}{#5}{\ColorOne}{#3}
\begin{pmatrix*}[r]
#4
\end{pmatrix*}
\end{SpotArray}
}
\end{center}
}}%
%%
\def\ABR#1#2#3{%
{\small
\begin{align*}
\ColorOne{a} &= \ColorOne{#1} \\
\ColorTwo{b} &= \ColorTwo{#2} \\
\ColorFive{r} &= \ColorFive{#3}
\end{align*}}}
\def\HF#1{\ensuremath{\frac{#1}{2}}}
\def\RootEt#1{\ensuremath{\frac{#1}{\sqrt{8}}}}
\def\I{\NiceI}
\def\E#1{\TE{#1}}

\def\GenericStart{%
\E{\SCirc} & \E{\SCirc} & \E{\SCirc} & \E{\SCirc} \\
\E{\SCirc} & \E{\SCirc} & \E{\SCirc} & \E{\SCirc} \\
\E{\alt<3>{0}{\SCirc}} & \E{\SCirc} & \E{\SCirc} & \E{\SCirc} \\
\E{\SCirc} & \E{\SCirc} & \E{\SCirc} & \E{\SCirc}}

\def\GenericMiddle{%
\E{1} & \E{0} & \E{0} & \E{0} \\
\E{0} & \E{\SCirc} & \E{\SCirc} & \E{\SCirc} \\
\E{0} & \E{\SCirc} & \E{\SCirc} & \E{\SCirc} \\
\E{0} & \E{\SCirc} & \E{\SCirc} & \E{\SCirc}}

\def\GenericFinal{%
\E{1} & \E{0} & \E{0} & \E{0} \\
\E{0} & \E{1} & \E{0} & \E{0} \\
\E{0} & \E{0} & \E{\SCirc} & \E{\SCirc} \\
\E{0} & \E{0} & \E{\SCirc} & \E{\SCirc}}

\def\U{%
\E{\HF{1}} & \E{\HF{1}}   & \E{\HF{1}}  & \E{\HF{1}}    \\
\E{\HF{1}} & \E{\HF{\I}}  & \E{-\HF{1}} & \E{-\HF{\I}}  \\
\E{\HF{1}} & \E{-\HF{1}}  & \E{\HF{1}}  & \E{-\HF{1}}   \\
\E{\HF{1}} & \E{-\HF{\I}} & \E{-\HF{1}}  & \E{\HF{\I}}}

\def\UaU{%
\E{\RootTwo} & \E{\RootEt{1+\I}} & \E{0} & \E{\RootEt{1-\I}} \\
\E{0}            & \E{\RootEt{1-\I}} & \E{\RootTwo} & \E{\RootEt{1+i}} \\
\E{\HF{1}}       & \E{-\HF{1}} & \E{\HF{1}} & \E{-\HF{1}} \\
\E{\HF{1}}       & \E{-\HF{\I}} & \E{-\HF{1}} & \E{\HF{\I}}}


\def\Tw#1{\frac{#1}{\sqrt{12}}}
\def\Tf#1{\frac{#1}{\sqrt{24}}}

\def\UbUaU{%
\E{\Tw{3}} & \E{\Tw{\I}} & \E{\Tw{1}} & \E{-\Tw{i}} \\
\E{0} & \E{\RootEt{1-\I}} & \E{\RootTwo} & \E{\RootEt{1+\I}} \\
\E{0} & \E{\Tf{3+\I}} & \E{-\Tf{2}} & \E{\Tf{3-\I}} \\
\E{\HF{1}} & \E{-\HF{i}} & \E{-\HF{1}} & \E{\HF{\I}}
}



\xdef\RMatrix{\ensuremath{U}}
%%
%%  #1 - U number for the two level array for this slide
%%  #2 - a
%%  #3 - b
%%  #4 - r
%%  #5 - Old
%%  #6 - Two level
%%  #7 - new
%%  #8 - title
%%  #9 - subtitle
\def\GenSlide#1#2#3#4#5#6#7#8#9{%
%%
%% Have to do this before frame, because
%%    \visible runs the frame multiple times
%%
\edef\PrevName{\RMatrix{}}%
\xdef\RMatrix{$U_{#1}$\RMatrix}%
\edef\NextName{\RMatrix{}}%
\GenSlideHelper{#1}{#2}{#3}{#4}{#5}{#6}{#7}{#8}{#9}}
%%
%%
\def\GenSlideHelper#1#2#3#4#5#6#7#8#9{%
\begin{frame}{#8}{#9}
\Vskip{-3em}\TwoColumns{%
\Vskip{-4em}\TwoUnequalColumns{0.7\textwidth}{0.3\textwidth}{\visible<3->{%
\[U_{#1}=\]
#6}}{%
\visible<2->{\ABR{#2}{#3}{#4}}
}
}{%
\visible<1->{\hbox to \textwidth{\hss\PrevName{} =\hbox to 3em{\hss}}
#5}
}
\visible<4->{\Vskip{-3em}\begin{center}
 \NextName{} = #7
\end{center}}
\end{frame}
}

\begin{frame}{Overview of example}{Each slide will look like this}
\Vskip{-5em}\TwoUnequalColumns{0.6\textwidth}{0.4\textwidth}{%
\only<1-6>{%
\begin{itemize}
    \item<1-> The current matrix is shown on the right, with two distinguished entries:
\end{itemize}
    \begin{description}
       \item<2->[\CFCirc{\RCone}] is the top-left entry for the portion of the matrix undergoing transformation.
       \item<3->[\CFCirc{\RCtwo}] is the entry which we are now eliminating (obtaining~$0$).
    \end{description}
\begin{itemize}
    \item<4-> These correspond to the values \ColorOne{$a$} and \ColorTwo{$b$} shown in the center of the slide.
    \item<5-> \ColorFive{$r$} is computed as \ColorFive{$\sqrt{\Prob{\CFCirc{\RCone}}+\Prob{\CFCirc{\RCtwo}}}$}
\end{itemize}}
\only<7->{%
\BigSkip{}
\only<7-9>{\GenTLArray{1}{3}{\Conj{a}/r}{\Conj{b}/r}{a/r}{-b/r}}
\only<10->{\visible<10>{\GenTLArray{2}{4}{\Conj{a}/r}{\Conj{b}/r}{a/r}{-b/r}}}

\begin{itemize}
\item <8-> The result of multiplying these two matrices is finally shown at the bottom center of the slide.
\item <9-> That matrix becomes the top right matrix on the next slide, as we continue to eliminate entries in the lower triangle.
\item<11-> Until we obtain this result, which we eliminate using its conjugate transpose.
\end{itemize}
}
}{%
\TwoUnequalColumns{0.2\textwidth}{0.8\textwidth}{%
\visible<4-10>{\ABR{\CFCirc{\RCone}}{\CFCirc{\RCtwo}}{\CFCirc{\RCfive}}}
}{%
\only<1-9>{\GenSpotArrayAB{3}{1}{1}{\GenericStart}}
\only<10-11>{\GenSpotArrayAB{4}{2}{2}{\GenericMiddle}}
\only<12->{\GenSpotArrayAB{0}{0}{0}{\GenericFinal}}
}%
\only<6-10>{
\visible<6->{%
To obtain our two-level array, we compute
\Vskip{-3em}\begin{eqnarray*}
    \ColorOne{\Conj{a}}/\ColorFive{r} &
    \ColorTwo{\Conj{b}}/\ColorFive{r} \\
    \ColorOne{a}/\ColorFive{r} & -\ColorTwo{b}/\ColorFive{r}
\end{eqnarray*}
which are deployed in the two-level array shown to the left.}
}}
    
\end{frame}
\GenSlide{1}{\HF{1}}{\HF{1}}{\RootTwo}{\GenSpotArrayAB{2}{1}{1}{\U}}{\GenTLArray{1}{2}{\RootTwo}{\RootTwo}{\RootTwo}{-\RootTwo}}{\GenSpotArrayZeroed{2}{1}{\UaU}}{Example}{Step 1}

\GenSlide{2}{\RootTwo}{\HF{1}}{\HF{\sqrt{3}}}{\GenSpotArrayAB{3}{1}{1}{\UaU}}{\GenTLArray{1}{3}{\frac{\sqrt{2}}{\sqrt{3}}}{\frac{1}{\sqrt{3}}}{\frac{1}{\sqrt{3}}}{-\frac{\sqrt{2}}{\sqrt{3}}}}{\GenSpotArrayZeroed{3}{1}{\UbUaU}}{Example}{Step 2}




}