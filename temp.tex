\SetTitle{99}{temp}{faster}{99}



{
%%
%% #1 i first row
%% #2 j second row
%% #3 ii
%% #4 ij
%% #5 ji
%% #6 jj
%%
\def\GenTLArray#1#2#3#4#5#6{%
   \begin{center}\begin{TLArray}{4}{#1}{#2}{#3}{#4}{#5}{#6}{1}{0}
      \ensuremath{\begin{pmatrix*}
         \GenFourByFour{}
      \end{pmatrix*}}
\end{TLArray}\end{center}}%
%%
\def\GenSpotArrayAB#1#2#3#4{%
  \GenSpotArrayHelper{#1}{#2}{#3}{#4}{\ColorTwo}}
\def\GenSpotArrayZeroed#1#2#3{%
  \GenSpotArrayHelper{#1}{#2}{0}{#3}{\ColorFour}}
\def\GenSpotArrayHelper#1#2#3#4#5{%
{%
\begin{center}
\ensuremath{%
\def\arraystretch{1.4}%
\begin{SpotArray}{4}{#1}{#2}{#5}{\ColorOne}{#3}
\begin{pmatrix*}[r]
#4
\end{pmatrix*}
\end{SpotArray}
}
\end{center}
}}%
%%
\def\ABR#1#2#3{%
{\small
\begin{align*}
\ColorOne{a} &= \ColorOne{#1} \\
\ColorTwo{b} &= \ColorTwo{#2} \\
\ColorFive{r} &= \ColorFive{#3}
\end{align*}}}
\def\HF#1{\ensuremath{\frac{#1}{2}}}
\def\RootEt#1{\ensuremath{\frac{#1}{\sqrt{8}}}}
\def\I{\NiceI}
\def\E#1{\TE{#1}}

\def\U{%
\E{\HF{1}} & \E{\HF{1}}   & \E{\HF{1}}  & \E{\HF{1}}    \\
\E{\HF{1}} & \E{\HF{\I}}  & \E{-\HF{1}} & \E{-\HF{\I}}  \\
\E{\HF{1}} & \E{-\HF{1}}  & \E{\HF{1}}  & \E{-\HF{1}}   \\
\E{\HF{1}} & \E{-\HF{\I}} & \E{-\HF{1}}  & \E{\HF{\I}}}

\def\UaU{%
\E{\RootTwo} & \E{\RootEt{1+\I}} & \E{0} & \E{\RootEt{1-\I}} \\
\E{0}            & \E{\RootEt{1-\I}} & \E{\RootTwo} & \E{\RootEt{1+i}} \\
\E{\HF{1}}       & \E{-\HF{1}} & \E{\HF{1}} & \E{-\HF{1}} \\
\E{\HF{1}}       & \E{-\HF{\I}} & \E{-\HF{1}} & \E{\HF{\I}}}
\def\Tw#1{\frac{#1}{\sqrt{12}}}
\def\Tf#1{\frac{#1}{\sqrt{24}}}

\def\UbUaU{%
\E{\Tw{3}} & \E{\Tw{\I}} & \E{\Tw{1}} & \E{-\Tw{i}} \\
\E{0} & \E{\RootEt{1-\I}} & \E{\RootTwo} & \E{\RootEt{1+\I}} \\
\E{0} & \E{\Tf{3+\I}} & \E{-\Tf{2}} & \E{\Tf{3-\I}} \\
\E{\HF{1}} & \E{-\HF{i}} & \E{-\HF{1}} & \E{\HF{\I}}
}



\xdef\RMatrix{\ensuremath{U}}
%%
%%  #1 - U number for the two level array for this slide
%%  #2 - a
%%  #3 - b
%%  #4 - r
%%  #5 - Old
%%  #6 - Two level
%%  #7 - new
%%  #8 - title
%%  #9 - subtitle
\def\GenSlide#1#2#3#4#5#6#7#8#9{%
%%
%% Have to do this before frame, because
%%    \visible runs the frame multiple times
%%
\edef\PrevName{\RMatrix{}}%
\xdef\RMatrix{$U_{#1}$\RMatrix}%
\edef\NextName{\RMatrix{}}%
%%
%%
\begin{frame}{#8}{#9}
\Vskip{-3em}\TwoColumns{%
\Vskip{-4em}\TwoUnequalColumns{0.7\textwidth}{0.3\textwidth}{\visible<3->{%
\[U_{#1}=\]
#6}}{%
\visible<2->{\ABR{#2}{#3}{#4}}
}
}{%
\visible<1->{\hbox to \textwidth{\hss\PrevName{} =\hbox to 3em{\hss}}
#5}
}
\visible<4->{\Vskip{-3em}\begin{center}
 \NextName{} = #7
\end{center}}
\end{frame}
}
\GenSlide{1}{\HF{1}}{\HF{1}}{\RootTwo}{\GenSpotArrayAB{2}{1}{1}{\U}}{\GenTLArray{1}{2}{\RootTwo}{\RootTwo}{\RootTwo}{-\RootTwo}}{\GenSpotArrayZeroed{2}{1}{\UaU}}{Example}{Step 1}

\GenSlide{2}{\RootTwo}{\HF{1}}{\HF{\sqrt{3}}}{\GenSpotArrayAB{3}{1}{1}{\UaU}}{\GenTLArray{1}{3}{\frac{\sqrt{2}}{\sqrt{3}}}{\frac{1}{\sqrt{3}}}{\frac{1}{\sqrt{3}}}{-\frac{\sqrt{2}}{\sqrt{3}}}}{\GenSpotArrayZeroed{3}{1}{\UbUaU}}{Example}{Step 2}




}